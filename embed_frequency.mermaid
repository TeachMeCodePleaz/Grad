graph TD
    A[开始] --> B[确保图像尺寸可被2^dwt_level整除]
    B --> C[多级小波分解]
    C --> D[记录DCT前的原始低频尺寸]
    D --> E[DCT分块填充处理]
    E --> F[分块处理和嵌入水印]
    F --> G[重构图像]
    G --> H[裁剪回原始低频尺寸]
    H --> I[逆小波变换]
    I --> J[最终裁剪]
    J --> K[返回处理后的图像]
    K --> L[结束]


